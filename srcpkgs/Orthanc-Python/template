# Template file for 'Orthanc-Python'
pkgname=Orthanc-Python
version=4.0
revision=1
wrksrc="${pkgname/-}-${version}"
build_style=cmake
configure_args="-DPYTHON_VERSION=${py3_ver} -DORTHANC_FRAMEWORK_SOURCE=path
 -DORTHANC_FRAMEWORK_ROOT=/usr/share/orthanc/OrthancFramework/Sources"
hostmakedepends="tar unzip python3 pkg-config"
makedepends="Orthanc-devel jsoncpp-devel libuuid-devel boost-devel python3-devel"
short_desc="Python plugin for Orthanc"
maintainer="Carlos E. Gallo F. <gcarlos@disroot.org>"
license="AGPL-3.0-or-later"
homepage="https://book.orthanc-server.com/plugins/python.html"
distfiles="https://www.orthanc-server.com/downloads/get.php?path=/plugin-python/${pkgname/-}-${version}.tar.gz"
checksum=3e5473abb8144c9c89101a09e733732cac19423bf847cfad51fd2bffab0e1647
nocross="A package on makedepends (Orthanc-devel) is marked as nocross"

post_install() {
	vlicense COPYING

	cd ${DESTDIR}
	mkdir -p usr/lib/orthanc/plugins
	mv usr/share/orthanc/plugins/* usr/lib/orthanc/plugins/
	rm -rf usr/share/orthanc/plugins
}
