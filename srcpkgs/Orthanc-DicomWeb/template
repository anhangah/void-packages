# Template file for 'Orthanc-DicomWeb'
pkgname=Orthanc-DicomWeb
version=1.13
revision=1
wrksrc="${pkgname/-}-${version}"
build_style=cmake
configure_args="-DALLOW_DOWNLOADS=ON -DORTHANC_FRAMEWORK_SOURCE=path
 -DORTHANC_FRAMEWORK_ROOT=/usr/share/orthanc/OrthancFramework/Sources"
hostmakedepends="tar unzip python3"
makedepends="Orthanc-devel pugixml-devel gtest-devel jsoncpp-devel
 libuuid-devel boost-devel"
short_desc="Plugin to bring support of the DICOMweb standard into Orthanc"
maintainer="Carlos E. Gallo F. <gcarlos@disroot.org>"
license="AGPL-3.0-or-later"
homepage="https://www.orthanc-server.com/static.php?page=dicomweb"
distfiles="https://www.orthanc-server.com/downloads/get.php?path=/plugin-dicom-web/${pkgname/-}-${version}.tar.gz"
checksum=9f1b651dc39dad9efdb14781fb546becf92ffb02ab0e49f439b34af316f14155
nocross="A package on makedepends (Orthanc-devel) is marked as nocross"

post_install() {
	vlicense COPYING

	cd ${DESTDIR}
	mkdir -p usr/lib/orthanc/plugins
	mv usr/share/orthanc/plugins/* usr/lib/orthanc/plugins/
	rm -rf usr/share/orthanc/plugins
}
